<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org" class="h-100">

<head>
    <meta charset="UTF-8">
    <title>Recommendation</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        .help-tip {
            text-align: center;
            position: relative;
            background-color: #a94a40;
            border-radius: 50%;
            width: 24px;
            height: 24px;
            font-size: 14px;
            line-height: 26px;
            z-index: 9999;
        }

        .help-tip:before {
            content: '!';
            font-weight: bold;
            color: white;
        }

        .help-tip:hover p {
            display: block;
            transform-origin: 100% 0%;
            -webkit-animation: fadeIn 0.3s ease-in-out;
            animation: fadeIn 0.3s ease-in-out;
        }

        .help-tip p {
            display: none;
            text-align: left;
            background-color: #1E2021;
            padding: 20px;
            width: 300px;
            border-radius: 3px;
            box-shadow: 1px 1px 1px rgba(0, 0, 0, 0.2);
            right: -4px;
            color: #FFF;
            font-size: 12px;
            line-height: 1.4;
            z-index: 9999;
        }

        .help-tip p:before {
            content: '';
            width: 0;
            height: 0;
            border: 6px solid transparent;
            border-bottom-color: #1E2021;
            right: 10px;
            top: -12px;
        }

        .help-tip p:after {
            width: 100%;
            height: 40px;
            content: '';
            top: -40px;
            left: 0;
        }

        @-webkit-keyframes fadeIn {
            0% {
                opacity: 0;
                transform: scale(0.6);
            }

            100% {
                opacity: 100%;
                transform: scale(1);
            }
        }

        @keyframes fadeIn {
            0% {
                opacity: 0;
            }

            100% {
                opacity: 100%;
            }
        }
    </style>
</head>

<body class="d-flex flex-column h-100">

    <div th:replace="~{fragments/header :: header}"></div>

    <p>Infrastructure Submitted. Recommendation page successfully loaded.</p>


    <div class="container">
        <div class="chart1" >
            <canvas id="chart1" style="max-height:200px;"></canvas>
            <p th:text="'Ein Anteil von ' + ${OSCount[0]} + '% haben ein macOS Betriebssystem'">Anzahl an PCs:</p>
        </div>
        <div class="chart2">
            <canvas id="chart2" style="max-height:200px;"></canvas>
        <div class="help-tip">
            <p th:text="'Ein Anteil von ' + ${policyDocCount[0]} + '% haben ein Policy Document'">Anzahl an PCs:</p>
        </div>
    </div>

    <script th:inline="javascript">
        /*<![CDATA[*/
        var dataOS = /*[[${OSCount}]]*/ 'default';
        var dataPolicyDoc = /*[[${policyDocCount}]]*/ 'default'; 
        var dataTrainings = /*[[${trainingsCount}]]*/ 'default'; 
        /*]]>*/

        var labelsOS = ["macOS", "windows", "linux"];
        var labelsYesNo = ["Yes", "No"];
        var colors = ["#82FA58", "#F4FA58", "#FE2E2E"]
        var colorsYesNo = ["#82FA58", "#FE2E2E"]

        new Chart("chart1", {
                type: 'pie',
                data: {
                    labels: labelsOS,
                    datasets: [{
                        backgroundColor: colors,
                        data: dataOS
                    }]
                },
                options: {
                    plugins: {
                        title: {
                            display: true,
                            text: "Verteilung der OS:"
                        }
                    }
                }
            });
            new Chart("chart2", {
                    type: 'pie',
                    data: {
                        labels: labelsYesNo,
                        datasets: [{
                            backgroundColor: colorsYesNo,
                            data: dataPolicyDoc
                        }]
                    },
                    options: {
                        plugins: {
                            title: {
                                display: true,
                                text: "Policy Document:"
                            }
                        }
                    }
                });


    </script>

</body>

</html>